<add><doc>
<field name="id">12974</field>
<field name="url">https://ticket.opensciencegrid.org/goc/12974</field>
<field name="title">osg-configure no longer enables org.osg.globus.gridftp-simple RSV probe for gridftp_hosts</field>
<field name="status">Engineering</field>
<field name="priority">4</field>
<field name="nextaction">ping for sw team</field>
<field name="assignees">osg-software-support-stream</field>
<field name="assignees">kagross</field>
<field name="assignees">matyas</field>
<field name="descriptions">Mat will take a look at this, as he owns RSV.</field>
<field name="descriptions">setting out in anticipation of a response.</field>
<field name="descriptions">[by Nick Bertrand]

The service-type for the org.osg.globus.gridftp-simple RSV probe provided in the rsv-metrics package was recently changed from OSG-GridFTP to GridFTP in rsv-metrics-3.7.7-1.osg.el5 (http&amp;#58;//koji-hub.batlab.org/koji/buildinfo?buildID=2612)&amp;#58;

* Thu Aug 23 2012 Scot Kronenfeld &amp;#60;kronenfe@cs.wisc.edu&amp;#62; 3.7.6-1 - Fixed service type of GridFTP metric (OSG-GridFTP -&amp;#62; GridFTP)

This prevents osg-configure from finding the metric as it searches for the service type OSG-GridFTP (/usr/lib/python2.4/site-packages/osg_configure/configure_modules/rsv.py, line 505)&amp;#58;

gridftp_metrics = self.__get_metrics_by_type(&amp;#34;OSG-GridFTP&amp;#34;)

The following patch to the osg-configure package allows the metric to be enabled on GridFTP hosts&amp;#58;

[123]root@gc1-hn&amp;#58;/etc/rsv# diff -U2 /usr/lib/python2.4/site-packages/osg_configure/configure_modules/rsv.py{.orig,}
--- /usr/lib/python2.4/site-packages/osg_configure/configure_modules/rsv.py.orig        2012-11-12 12&amp;#58;10&amp;#58;10.000000000 -0600
+++ /usr/lib/python2.4/site-packages/osg_configure/configure_modules/rsv.py     2012-11-12 12&amp;#58;10&amp;#58;39.000000000 -0600
@@ -503,5 +503,5 @@
       raise exceptions.ConfigureError(&amp;#34;Failed to configure RSV&amp;#34;)
 
-    gridftp_metrics = self.__get_metrics_by_type(&amp;#34;OSG-GridFTP&amp;#34;)
+    gridftp_metrics = self.__get_metrics_by_type(&amp;#34;GridFTP&amp;#34;)
 
     count = 0

This patch was made against the following package versions&amp;#58;

osg-configure-1.0.15-1.osg.el5
osg-configure-rsv-1.0.15-1.osg.el5
rsv-3.7.7-1.osg.el5
rsv-consumers-3.7.7-1.osg.el5
rsv-core-3.7.7-1.osg.el5
rsv-metrics-3.7.7-1.osg.el5

[META Information]
Application issue with type&amp;#58; vdt</field>
<field name="SUBMITTER_NAME">0</field>
</doc></add>